<html>
  <head>
    <meta name="ARModel" content="width=device-width, initial-scale=1" />
	  
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-image-aframe.prod.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
	  <a-scene mindar-image="imageTargetSrc: https://urginsan.github.io/webTesting/ARModel.mind; uiError:no; uiLoading:no; uiScanning:no" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false" id="scene" style="display: none" >
      
	  <a-assets>
	    <a-asset-item id="plane-obj" src="https://urginsan.github.io/webTesting/Shirt_Tshirt.obj"></a-asset-item>  
	    <video id="videoTex" loop="true" autoplay playsinline src="https://urginsan.github.io/webTesting/TextureAtlas.mp4"></video>
		
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
      <a-entity mindar-image-target="targetIndex: 0">
	  <a-entity obj-model="obj: #plane-obj;" rotation="0 0 0 " position="0.075 -3.6 -0.3" scale="2.8 2.8 2.8" material="src:#videoTex"></a-entity>

         <!--<a-video src="#videoTex" width="1.6" height="0.9" position="0 0 0"></a-video>-->
      </a-entity>
    </a-scene>
	  
	  <script>
		  function startPlaying(event) {
		  document.getElementById("scene").style.display = "block";
		  document.getElementById("videoTex").play();
		  event.target.style.display="none";
		  }

		  AFRAME.registerComponent("anim1", {
        init: function () {
            // load the .pngs
            let loader = new THREE.TextureLoader();
            this.pngArray = [];
            let anim1_frames = 9; // total frames
            for (var i = 0; i < anim1_frames; i++) {
                if (i < 10) {
                    i = '0' + i; // add 0 in front of single digit frames
                }
                this.pngArray.push(loader.load('https://urginsan.github.io/webTesting/sequence1/TextureAtlas_' + i + '.png')); // push TextureLoader loaded with img to array
            };

            let mesh = this.el.getObject3D("mesh");
            this.material = mesh.material;
            var i = 0;
            this.id = setInterval(e => {
                if (i >= this.pngArray.length) i = 0;
                this.material.map = this.pngArray[i++];
                this.material.needsUpdate = true;
            }, 1000 / 25); // play at 25fps
        },
        remove: function () {
            clearInterval(this.id);
            // free the memory
            for (let i = 0; i < this.pngArray.length; i++) {
                this.pngArray[i].dispose();
            }
        }
    })
	  </script>
	  <div style="display:flex; justify-content:center; align-items:center; height:100vh;">
		  <button type="button" onclick="startPlaying(event)" style="width: 200px; height: 100px; font-size : 18px;" name="show_more">Начать</button>
	  </div>
  </body>
</html>
